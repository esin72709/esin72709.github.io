##### 04. 자바 메모리 관리
> JVM은 시스템(운영체제)으로부터 프로그램을 실행하는 데 필요한 메모리를 할당받은 뒤 할당 받은 메모리를 용도에 따라 세 영역으로 나누어 관리함

**메서드 영역(Method area)**
> 프로그램 실행 중 특정 클래스가 사용되면, JVM은 해당 클래스의 클래스 파일을(*.class)를 읽어서 분석한 다음 다음 클래스에 대한 정보를 저장하게 됨
> 이때 클래스 변수 또는 메서드(static)도 이 영역에 함께 생성됨

**힙 영역(heap area)**
> 인스턴스 변수들이 생성되는 공간으로 대부분의 메모리 공간은 힙 영역이 됨.
> 서버 시스템이나 메모리 사용이 많은 프로그램을 개발하거나 실행할 때 힙 메모리 부족으로 문제가 발생할 수 있으며 이 경우 JVM 메모리 옵션을 조정해주어야함

**호출 스택(call stack or execution stack)**
> 메서드 실행에 필요한 메모리 공간
> 메서드가 호출될 때 호출 스택에는 호출된 메서드를 위한 메모리가 할당되며, 이 메모리는 메서드가 작업을 수행하는 동안 지역 변수 및 매개변수들의 연산 중간결과 등을 저장하는 데 사용됨
> 메서드가 작업을 마치면 할당되었던 메모리 공간은 반환되어 정리(비워짐)됨

**가비지 컬렉션(garbage collection)**
> 줄여서 GC라고도 함
> 자바에서 사용되지 않는 메모리를 정리해주는 작업
> GC과정은 전체적인 JVM 성능에 영향을 미치는 요소

 **Permanent Generation**
 
 - 생성된 객체들의 정보와 주소값이 저장된 공간
 - Class loader에 의해 load되는 Class, Method 등에 대한 Meta 정보가 저장되는 영역
 - JVM에 의해 실행됨

**자바 객체 참조**
> 좀 더 메모리를 고려하는 프로그램을 개발하는 경우 단순히 new가 아니라 WeakReference 혹은 SoftReference를 이용해 객체를 생성해야 적절한 메모리 관리가 이루어짐

**Strong Reference**
+ 일반적으로 new를 통해서 객체를 생성할 때 발생하는 참조 유형
+ 가비지 컬렉션의 대상에서 제외

**Soft Reference**
+ 강한 참조와는 다르게 GC에 의해 수거될 수도 있고, 수거되지 않을 수도 있음
+ 메모리에 충분한 여유가 있다면 GC에 의해 수거되지 않음
+ out of memory의 시점에 가깝다면 수거될 확률이 높음

**Weak Reference**
+ 약한 참조는 GC가 발생하면 무조건 수거됨
+ Weak Reference가 사라지는 시점이 GC의 실행 주기와 일치하며 이를 이용해 짧은 주기에 자주 사용되는 객체를 캐시할 때 유용

[출처](https://dinfree.com/lecture/language/112_java_1.html)
